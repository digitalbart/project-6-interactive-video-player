<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Project 6 Interactive Video Payer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display" rel="stylesheet">
  <link rel="stylesheet" href="css/mediaelementplayer.min.css"> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/mediaelement-and-player.min.js"></script>  
</head>
  <body>
  <header></header>
  <main>   
    <div class="video__wrapper">
      <video id="myVideo" width="100%" height="100%" style="max-height: 720px;">
        <source src="video/video.mp4" type="video/mp4" >
          <source src="video/video.ogg" type="video/ogg">
          </video>
        </div>
        <p class="captions">
          <span data-start="0" data-end="4.130">Now that we've looked at the architecture of the internet, let's see how you might</span> <span data-start="4.130" data-end="7.535">connect your personal devices to
          the internet inside your house.</span> <span data-start="7.535" data-end="11.270">Well there are many ways to connect to the internet, and</span> <span data-start="11.270" data-end="13.960">most often people connect wirelessly.</span>
        </p>
        <p class="captions">
          <span data-start="13.960" data-end="17.940">Let's look at an example of how you can connect to the internet.</span> <span data-start="17.940" data-end="22.370">If you live in a city or a town, you probably have a coaxial cable for</span> <span data-start="22.370" data-end="26.880">cable Internet, or a phone line if you have DSL, running to the outside of</span> <span data-start="26.880" data-end="30.920">your house, that connects you to the Internet Service Provider, or ISP.</span> <span data-start="32.100" data-end="34.730">If you live far out in the country, you'll more likely have</span> <span data-start="34.730" data-end="39.430">a dish outside your house, connecting you wirelessly to your closest ISP, or</span> <span data-start="39.430" data-end="41.190">you might also use the telephone system.</span>
        </p>
        <p class="captions">
          <span data-start="42.350" data-end="46.300">Whether a wire comes straight from
          the ISP hookup outside your house, or</span> <span data-start="46.300" data-end="49.270">it travels over radio waves from your roof,</span> <span data-start="49.270" data-end="53.760">the first stop a wire will make once inside your house, is at your modem.</span> <span data-start="53.760" data-end="57.780">A modem is what connects the internet to your network at home.</span> <span data-start="57.780" data-end="60.150">A few common residential modems are DSL or</span>
        </p>
      </p>
    </main>
    <footer></footer>
    <script>
    $(document).ready(function(){
      // get player dimensions
      var w = parseInt($('.video__wrapper').css('width'));
      var h = parseInt($('.video__wrapper').css('height'));

      // load mediaelement player js and 
      // use dimensisons from above variables
      $('video, audio').mediaelementplayer({
        features: ['playpause','fullscreen','volume','current','progress'],
        startLanguage: 'en',
        stretching: 'responsive',
        // if the <video width> is not specified, this is the default
        defaultVideoWidth: h,
        // if the <video height> is not specified, this is the default
        defaultVideoHeight: w,
        // if set, overrides <video width>
        videoWidth: w,
        // if set, overrides <video height>
        videoHeight: h,                    
      });

      // jQuery way 
      // loop over all spans and highlight
      // current span where video is playing at
      // using the active class
      $('#myVideo').on('timeupdate',function(event){

        var $vid = $('#myVideo')[0];

        var captions = $('.captions span');
        for (i = 0; i < captions.length; ++i) {
          const start = captions[i]['attributes']['data-start']['value'];
          const end = captions[i]['attributes']['data-end']['value'];
          // debug
          // console.log("start == "  + start);
          // console.log("end == " + end);
          // console.log(" current time == " +  $vid.currentTime );
          if ($vid.currentTime > start && $vid.currentTime < end) {          
            $(captions[i]).addClass('active');            
          } else {
            $(captions[i]).removeClass('active');            
          }            
        }

      }); // end timeupdate

      // event listener for click on caption and
      // seeking directly to that clicked part of
      // the video
      $('.captions span').on('click', function(){
        const start = $(this).data('start');
        const end = $(this).data('end');
        // skip to clicked span start time
        $('#myVideo')[0].currentTime = start;
        $('#myVideo')[0].play();
      });          

      // js way
      // Get the video element with id="myVideo"
      // var x = document.getElementById("myVideo");

      // // Attach a timeupdate event to the video element, and execute a function if the current playback position has changed
      // x.addEventListener("timeupdate", myFunction);

      // function myFunction() {
      //     // Display the current position of the video in a p element with id="demo"
      //     document.getElementById("demo").innerHTML = x.currentTime;
      // }
          
    });
    </script>
  </body>
</html>